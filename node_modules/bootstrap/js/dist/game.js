var arr = []
arr.length = 8
var qtdZeros = 9
var ganhou = 0
var res = document.querySelector('div#res')


for (let i = 0; i <= 8; i++) {
  arr[i] = '0'
}

function jogar(val) {
  var posicao = document.querySelector(`td#pos${val}`)

  if (arr[val] === '0') {
    if (qtdZeros > 0)
      if (qtdZeros % 2 !== 0) {
        arr[val] = 'X'
        posicao.textContent = 'X'
      }
      else {
        arr[val] = 'O'
        posicao.textContent = 'O'
      }

    qtdZeros--
  }

  //verificar quem ganhou

  if (qtdZeros !== 0 && qtdZeros > 0) {
    if ((arr[0] === 'X' && arr[1] === 'X' && arr[2] === 'X') || (arr[3] === 'X' && arr[4] === 'X' && arr[5] === 'X') || (arr[6] === 'X' && arr[7] === 'X' && arr[8] === 'X')) {
      qtdZeros = 0
      ganhou = 1
    }
    else
      if ((arr[0] === 'O' && arr[1] === 'O' && arr[2] === 'O') || (arr[3] === 'O' && arr[4] === 'O' && arr[5] === 'O') || (arr[6] === 'O' && arr[7] === 'O' && arr[8] === 'O')) {
      qtdZeros = 0
      ganhou = 1
      }

    if ((arr[0] === 'X' && arr[3] === 'X' && arr[6] === 'X') || (arr[1] === 'X' && arr[4] === 'X' && arr[7] === 'X') || (arr[2] === 'X' && arr[5] === 'X' && arr[8] === 'X')) {
      qtdZeros = 0
      ganhou = 1
    }
    else
      if ((arr[0] === 'O' && arr[3] === 'O' && arr[6] === 'O') || (arr[1] === 'O' && arr[4] === 'O' && arr[7] === 'O') || (arr[2] === 'O' && arr[5] === 'O' && arr[8] === 'O')) {
      qtdZeros = 0
      ganhou = 1
      }


    if ((arr[0] === 'X' && arr[4] === 'X' && arr[8] === 'X') || (arr[2] === 'X' && arr[4] === 'X' && arr[6] === 'X')) {
      qtdZeros = 0
      ganhou = 1
    }

    if ((arr[0] === 'O' && arr[4] === 'O' && arr[8] === 'O') || (arr[2] === 'O' && arr[4] === 'O' && arr[6] === 'O')) {
      qtdZeros = 0
      ganhou = 1 
    }

  }

  if (qtdZeros === 0) {
    qtdZeros = -1

    res.innerHTML = `<button class="m-2 btn btn-primary" onclick="limpar()">Jogar Novamente</button>`
  }

  if (ganhou) {
    qtdZeros = -1
    //mostrar quem ganhou

    res.innerHTML = `<button class="m-2 btn btn-primary" onclick="limpar()">Jogar Novamente</button>`
  }

}

function limpar() {
  for (let i = 0; i <= 8; i++) {
    var posicao = document.querySelector(`td#pos${i}`)
    arr[i] = '0'
    qtdZeros = 9
    posicao.textContent = 'â €'
    ganhou = 0
    res.innerHTML = ''
  }
}